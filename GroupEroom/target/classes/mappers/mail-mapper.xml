<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mailMapper">

	<resultMap type="Mail" id="mailResultMap">
		<id property="mailNo" column="MAIL_NO" />
		<result property="receiverId" column="RECEIVER_ID" />
		<result property="senderId" column="SENDER_ID" />
		<result property="ccId" column="CC_ID" />
		<result property="memberName" column="MEMBER_NAME" />
		<result property="mailTitle" column="MAIL_TITLE" />
		<result property="mailContents" column="MAIL_CONTENTS" />
		<result property="sentDate" column="SENT_DATE" />
		<result property="readDate" column="READ_DATE" />
		<result property="readCount" column="READ_COUNT" />
	</resultMap>
	
<!-- 카운트 출력 -->
	<select id="selectListCount" resultType="_int">
		SELECT COUNT(*) FROM MAIL
	</select>
	
<!-- 조회수 -->
	<update id="updateCount">
		UPDATE MAIL
		SET MAIL_COUNT = MAIL_COUNT + 1
		WHERE MAIL_NO = #{mailNo}
	</update>
	
<!-- 받은편지함 출력 -->
	<select id="selectAllInbox" parameterType="_int" resultMap="mailResultMap">
		SELECT MAIL_NO, RECEIVER_ID, SENDER_ID, MEMBER_NAME, MEMBER_DEPT, MAIL_TITLE, MAIL_CONTENTS, SENT_DATE, READ_DATE, READ_COUNT   
		FROM MAIL JOIN MEMBER ON MAIL.SENDER_ID = MEMBER.MEMBER_ID
		WHERE RECEIVER_ID = #{value } 
		ORDER BY MAIL_NO DESC
	</select>
	
<!-- 게시글 상세조회
	<select id="selectOne" resultMap="boardResultMap">
		SELECT * FROM BOARD WHERE BOARD_NO = #{boardNo} AND B_STATUS = 'Y'
	</select> -->
	
<!-- 게시글 작성
	<insert id="insertBoard">
		INSERT INTO BOARD
		VALUES(SEQ_BOARDID.NEXTVAL, #{boardTitle }, #{boardContent }, #{boardWriter }, #{originalFilename }, #{renameFilename }, DEFAULT, DEFAULT, DEFAULT, DEFAULT)
	</insert> -->
	
<!-- 게시글 수정
	<update id="updateBoard">
		UPDATE BOARD
		SET BOARD_TITLE = #{boardTitle}, BOARD_CONTENT = #{boardContent}, ORIGINAL_FILENAME = #{originalFilename}, B_UPDATE_DATE = #{bUpdateDate}
		WHERE BOARD_NO = #{boardNo}
	</update> -->

<!-- 게시글 삭제
	<delete id="deleteBoard" parameterType="_int">
		DELETE FROM BOARD WHERE BOARD_NO = #{boardNo}
	</delete> -->

</mapper>